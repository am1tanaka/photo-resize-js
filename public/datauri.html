<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>DATA URI</title>
</head>
<body>
    <h1>指定した画像をDATA URIに変換する</h1>
    <input type="file" name="file-photo" id="file-photo">
    <div>
        <textarea id="result" cols="100" rows="5"></textarea>
    </div>
    <div id="exif-result"></div>
</body>
<script src="../src/plugins/piexif.js"></script>
<script src="../testdatas/testdata_var.js"></script>
<script>
function convDataURI(evt) {
    var reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('result').innerText = e.target.result;
    }
    reader.readAsDataURL(evt.target.files[0]);
}
document.getElementById('file-photo').addEventListener('change', convDataURI, false);

// exifテスト
var exifObj = piexif.load(TEST_DATA);
var output = "";
for (var ifd in exifObj) {
    if (ifd == "thumbnail") {
        continue;
    }
    output += "-" + ifd + "<br>";
    for (var tag in exifObj[ifd]) {
        output += "  " + piexif.TAGS[ifd][tag]["name"] + ":" + exifObj[ifd][tag]+"<br>";
    }
}
document.getElementById('exif-result').innerHTML = output;

</script>
</html>
