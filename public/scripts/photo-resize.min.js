!function e(i,t,n){function o(f,a){if(!t[f]){if(!i[f]){var s="function"==typeof require&&require;if(!a&&s)return s(f,!0);if(r)return r(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var d=t[f]={exports:{}};i[f][0].call(d.exports,function(e){var t=i[f][1][e];return o(t?t:e)},d,d.exports,e,i,t,n)}return t[f].exports}for(var r="function"==typeof require&&require,f=0;f<n.length;f++)o(n[f]);return o}({1:[function(e,i,t){!function(e,i){if("function"==typeof define&&define.amd)define(["exports"],i);else if("undefined"!=typeof t)i(t);else{var n={exports:{}};i(n.exports),e.photoResize=n.exports}}(this,function(e){"use strict";!function(i,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof e)t(e);else{var n={exports:{}};t(n.exports),i.photoResize=n.exports}}(void 0,function(e){!function(i,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof e)t(e);else{var n={exports:{}};t(n.exports),i.photoResize=n.exports}}(void 0,function(e){!function(i,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof e)t(e);else{var n={exports:{}};t(n.exports),i.photoResize=n.exports}}(void 0,function(e){!function(i,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof e)t(e);else{var n={exports:{}};t(n.exports),i.photoResize=n.exports}}(void 0,function(e){!function(i,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof e)t(e);else{var n={exports:{}};t(n.exports),i.photoResize=n.exports}}(void 0,function(e){function i(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),n=function(){function e(t){i(this,e),this.USE_WORKER="undefined"==typeof t||t}return t(e,[{key:"loadAndResize",value:function(e,i,t,n,o){var r=this,f=new FileReader;f.onload=function(e){r.resize(e.target.result,i,t,n,o)},f.readAsDataURL(e)}},{key:"_loadExif",value:function(e){return this.exifObj=piexif.load(e),this.exifObj}},{key:"getImageSize",value:function(e){var i=[0,0];e=e||this.exifObj;try{i[0]=e["0th"][piexif.ImageIFD.ImageWidth],i[1]=e["0th"][piexif.ImageIFD.ImageLength]}catch(t){try{i[0]=e.Exif[piexif.ExifIFD.PixelXDimension],i[1]=e.Exif[piexif.ExifIFD.PixelYDimension]}catch(n){return!1}}if(this.isSwapSide(e)){var o=i[0];i[0]=i[1],i[1]=o}return i}},{key:"isSwapSide",value:function(e){var i=this.getOrientation(e);return i>=5}},{key:"_JSImageResizer",value:function(e,i,t,n,o,r){var f=new Resize(i,t,n,o,(!0),(!0),this.USE_WORKER,r);f.resize(e)}},{key:"resize",value:function(e,i,t,n,o){var r,f=this;this._loadExif(e),o=o||!1,this.isSwapSide()&&(r=i,i=t,t=r);var a=document.createElement("canvas"),s=a.getContext("2d"),u=new Image;u.crossOrigin="Anonymous",u.onload=function(r){var u=1,d=1,p=1,h=i,c=t;return u=i/this.width,d=t/this.height,u<=d?(p=u,h=i,c=this.height*p):(p=d,h=this.width*p,c=t),!o&&p>=1?void n(e):(a.width=this.width,a.height=this.height,s.drawImage(this,0,0),void f._JSImageResizer(s.getImageData(0,0,this.width,this.height).data,this.width,this.height,h,c,function(e){var i=document.createElement("canvas");i.width=h,i.height=c;var t=i.getContext("2d");f._updateCanvas(t,t.createImageData(h,c),e),n(f._setSize(f.exifObj,i.toDataURL("image/jpeg"),h,c))}))},u.src=e}},{key:"_setSize",value:function(e,i,t,n){e["0th"][piexif.ImageIFD.ImageWidth]=t,e["0th"][piexif.ImageIFD.ImageLength]=n,e.Exif[piexif.ExifIFD.PixelXDimension]=t,e.Exif[piexif.ExifIFD.PixelYDimension]=n;var o=piexif.dump(e);return piexif.insert(o,i)}},{key:"_updateCanvas",value:function(e,i,t){for(var n=i.data,o=n.length,r=0;r<o;++r)n[r]=255&t[r];e.putImageData(i,0,0)}},{key:"getOrientation",value:function(e){return e=e||this.exifObj,e["0th"][piexif.ImageIFD.Orientation]||1}},{key:"exifHTML",value:function(e){e=e||this.exifObj;var i="";for(var t in e)if("thumbnail"!=t){i+="-"+t+"<br>";for(var n in e[t])i+="  "+piexif.TAGS[t][n].name+":"+e[t][n]+"<br>"}return i}}],[{key:"convDataURL2Binary",value:function(i){if(!i.startsWith("data:image/"))return!1;var t=i.replace(/^.*?,/,""),n=e._base64_decode(t),o=new Uint8Array(n.length);return o.set(n),o}},{key:"_base64_decode",value:function(e){var i,t,n,o,r,f;if(!e||!e.length)return[];for(i=0,f={61:64,47:63,43:62};i<62;i++)f[i<26?i+65:i<52?i+71:i-4]=i;for(i=0,n=e.length,o=[],r=[];i<n;i+=4){for(t=0;t<4;t++)r[t]=f[e.charCodeAt(i+t)||0];o.push(r[0]<<2|(63&r[1])>>>4,(15&r[1])<<4|(63&r[2])>>>2,(3&r[2])<<6|63&r[3])}return 64===r[3]&&(o.pop(),64===r[2]&&o.pop()),o}}]),e}();e["default"]=n,"undefined"!=typeof window&&!window.PhotoResize&&(window.PhotoResize=n)})})})})})})},{}]},{},[1]);
//# sourceMappingURL=photo-resize.min.js.map
