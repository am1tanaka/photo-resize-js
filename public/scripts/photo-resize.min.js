!function e(i,t,n){function a(o,f){if(!t[o]){if(!i[o]){var u="function"==typeof require&&require;if(!f&&u)return u(o,!0);if(r)return r(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var h=t[o]={exports:{}};i[o][0].call(h.exports,function(e){var t=i[o][1][e];return a(t?t:e)},h,h.exports,e,i,t,n)}return t[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,i,t){!function(e,i){if("function"==typeof define&&define.amd)define(["exports"],i);else if("undefined"!=typeof t)i(t);else{var n={exports:{}};i(n.exports),e.photoResize=n.exports}}(this,function(e){"use strict";function i(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),n=function(){function e(t){i(this,e),this.USE_WORKER="undefined"==typeof t||t}return t(e,[{key:"loadAndResize",value:function(e,i,t,n,a){var r=this,o=new FileReader;o.onload=function(e){r.resize(e.target.result,i,t,n,a)},o.readAsDataURL(e)}},{key:"_loadExif",value:function(e){return this.exifObj=piexif.load(e),this.exifObj}},{key:"getImageSize",value:function(e){var i=[0,0];e=e||this.exifObj;try{i[0]=e["0th"][piexif.ImageIFD.ImageWidth],i[1]=e["0th"][piexif.ImageIFD.ImageLength]}catch(t){try{i[0]=e.Exif[piexif.ExifIFD.PixelXDimension],i[1]=e.Exif[piexif.ExifIFD.PixelYDimension]}catch(n){return!1}}if(this.isSwapSide(e)){var a=i[0];i[0]=i[1],i[1]=a}return i}},{key:"isSwapSide",value:function(e){var i=this.getOrientation(e);return i>=5}},{key:"_JSImageResizer",value:function(e,i,t,n,a,r){var o=new Resize(i,t,n,a,(!0),(!0),this.USE_WORKER,r);o.resize(e)}},{key:"resize",value:function(e,i,t,n,a){var r,o=this;this._loadExif(e),a=a||!1,this.isSwapSide()&&(r=i,i=t,t=r);var f=document.createElement("canvas"),u=f.getContext("2d"),s=new Image;s.crossOrigin="Anonymous",s.onload=function(r){var s=1,h=1,d=1,c=i,l=t;return s=i/this.width,h=t/this.height,s<=h?(d=s,c=i,l=this.height*d):(d=h,c=this.width*d,l=t),!a&&d>=1?void n(e):(f.width=this.width,f.height=this.height,u.drawImage(this,0,0),void o._JSImageResizer(u.getImageData(0,0,this.width,this.height).data,this.width,this.height,c,l,function(e){var i=document.createElement("canvas");i.width=c,i.height=l;var t=i.getContext("2d");o._updateCanvas(t,t.createImageData(c,l),e),n(o._setSize(o.exifObj,i.toDataURL("image/jpeg"),c,l))}))},s.src=e}},{key:"_setSize",value:function(e,i,t,n){e["0th"][piexif.ImageIFD.ImageWidth]=t,e["0th"][piexif.ImageIFD.ImageLength]=n,e.Exif[piexif.ExifIFD.PixelXDimension]=t,e.Exif[piexif.ExifIFD.PixelYDimension]=n;var a=piexif.dump(e);return piexif.insert(a,i)}},{key:"_updateCanvas",value:function(e,i,t){for(var n=i.data,a=n.length,r=0;r<a;++r)n[r]=255&t[r];e.putImageData(i,0,0)}},{key:"getOrientation",value:function(e){return e=e||this.exifObj,e["0th"][piexif.ImageIFD.Orientation]||1}},{key:"exifHTML",value:function(e){e=e||this.exifObj;var i="";for(var t in e)if("thumbnail"!=t){i+="-"+t+"<br>";for(var n in e[t])i+="  "+piexif.TAGS[t][n].name+":"+e[t][n]+"<br>"}return i}}],[{key:"convDataURL2Binary",value:function(e){if(!e.startsWith("data:image/"))return!1;var i=e.split(",");return window.atob(i[1])}}]),e}();e["default"]=n,"undefined"!=typeof window&&!window.PhotoResize&&(window.PhotoResize=n)})},{}]},{},[1]);
//# sourceMappingURL=photo-resize.min.js.map
